<UserControl x:Class="GymManager.WPF.Views.Members.MembersView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             mc:Ignorable="d"
             d:DesignHeight="600" d:DesignWidth="900"
             Background="#0F172A">

	<UserControl.Resources>
		<!-- Estilo para botones de accion -->
		<Style x:Key="ActionButton" TargetType="Button">
			<Setter Property="Padding" Value="16,10"/>
			<Setter Property="FontSize" Value="13"/>
			<Setter Property="FontWeight" Value="SemiBold"/>
			<Setter Property="Cursor" Value="Hand"/>
			<Setter Property="Margin" Value="0,0,8,0"/>
			<Setter Property="Template">
				<Setter.Value>
					<ControlTemplate TargetType="Button">
						<Border Background="{TemplateBinding Background}"
                                CornerRadius="6"
                                Padding="{TemplateBinding Padding}">
							<ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
						</Border>
					</ControlTemplate>
				</Setter.Value>
			</Setter>
		</Style>

		<!-- Estilo para TextBox de busqueda -->
		<Style x:Key="SearchTextBox" TargetType="TextBox">
			<Setter Property="Background" Value="#1E293B"/>
			<Setter Property="Foreground" Value="White"/>
			<Setter Property="BorderBrush" Value="#334155"/>
			<Setter Property="BorderThickness" Value="1"/>
			<Setter Property="Padding" Value="12,10"/>
			<Setter Property="FontSize" Value="14"/>
			<Setter Property="Template">
				<Setter.Value>
					<ControlTemplate TargetType="TextBox">
						<Border Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="6">
							<ScrollViewer x:Name="PART_ContentHost"
                                          Margin="{TemplateBinding Padding}"
                                          VerticalAlignment="Center"/>
						</Border>
					</ControlTemplate>
				</Setter.Value>
			</Setter>
		</Style>
	</UserControl.Resources>

	<Grid Margin="24">
		<Grid.RowDefinitions>
			<RowDefinition Height="Auto"/>
			<RowDefinition Height="Auto"/>
			<RowDefinition Height="*"/>
			<RowDefinition Height="Auto"/>
		</Grid.RowDefinitions>

		<!-- HEADER -->
		<StackPanel Grid.Row="0" Margin="0,0,0,20">
			<TextBlock Text="Gestion de Miembros"
                       FontSize="28"
                       FontWeight="Bold"
                       Foreground="White"/>
			<TextBlock Text="Administre los miembros del gimnasio"
                       FontSize="14"
                       Foreground="#64748B"
                       Margin="0,4,0,0"/>
		</StackPanel>

		<!-- BARRA DE HERRAMIENTAS -->
		<Grid Grid.Row="1" Margin="0,0,0,16">
			<Grid.ColumnDefinitions>
				<ColumnDefinition Width="*"/>
				<ColumnDefinition Width="Auto"/>
			</Grid.ColumnDefinitions>

			<!-- Busqueda -->
			<Grid Grid.Column="0" Margin="0,0,16,0">
				<Grid.ColumnDefinitions>
					<ColumnDefinition Width="*" MaxWidth="400"/>
					<ColumnDefinition Width="Auto"/>
				</Grid.ColumnDefinitions>

				<TextBox Grid.Column="0"
                         Text="{Binding SearchText, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                         Style="{StaticResource SearchTextBox}"
                         ToolTip="Buscar por nombre, codigo, email o telefono">
					<TextBox.InputBindings>
						<KeyBinding Key="Enter" Command="{Binding SearchCommand}"/>
					</TextBox.InputBindings>
				</TextBox>

				<Button Grid.Column="1"
                        Content="Buscar"
                        Command="{Binding SearchCommand}"
                        Background="#3B82F6"
                        Foreground="White"
                        Style="{StaticResource ActionButton}"
                        Margin="8,0,0,0"/>
			</Grid>

			<!-- Botones de accion -->
			<StackPanel Grid.Column="1" Orientation="Horizontal">
				<Button Content="+ Nuevo Miembro"
                        Command="{Binding AddMemberCommand}"
                        Background="#10B981"
                        Foreground="White"
                        Style="{StaticResource ActionButton}"/>

				<Button Content="Editar"
                        Command="{Binding EditMemberCommand}"
                        Background="#F59E0B"
                        Foreground="White"
                        Style="{StaticResource ActionButton}"/>

				<Button Content="Eliminar"
                        Command="{Binding DeleteMemberCommand}"
                        Background="#EF4444"
                        Foreground="White"
                        Style="{StaticResource ActionButton}"/>

				<Button Content="Refrescar"
                        Command="{Binding RefreshCommand}"
                        Background="#6366F1"
                        Foreground="White"
                        Style="{StaticResource ActionButton}"
                        Margin="0"/>
			</StackPanel>
		</Grid>

		<!-- DATAGRID DE MIEMBROS -->
		<Border Grid.Row="2"
                Background="#1E293B"
                CornerRadius="8"
                Padding="0">
			<DataGrid ItemsSource="{Binding Members}"
                      SelectedItem="{Binding SelectedMember, Mode=TwoWay}"
                      AutoGenerateColumns="False"
                      IsReadOnly="True"
                      SelectionMode="Single"
                      Background="Transparent"
                      BorderThickness="0"
                      RowBackground="#1E293B"
                      AlternatingRowBackground="#263549"
                      GridLinesVisibility="Horizontal"
                      HorizontalGridLinesBrush="#334155"
                      HeadersVisibility="Column"
                      CanUserAddRows="False"
                      CanUserDeleteRows="False"
                      CanUserResizeRows="False">

				<!-- Estilo del Header -->
				<DataGrid.ColumnHeaderStyle>
					<Style TargetType="DataGridColumnHeader">
						<Setter Property="Background" Value="#334155"/>
						<Setter Property="Foreground" Value="#94A3B8"/>
						<Setter Property="Padding" Value="12,10"/>
						<Setter Property="FontWeight" Value="SemiBold"/>
						<Setter Property="FontSize" Value="12"/>
						<Setter Property="BorderThickness" Value="0"/>
					</Style>
				</DataGrid.ColumnHeaderStyle>

				<!-- Estilo de las celdas -->
				<DataGrid.CellStyle>
					<Style TargetType="DataGridCell">
						<Setter Property="Foreground" Value="White"/>
						<Setter Property="Padding" Value="12,8"/>
						<Setter Property="BorderThickness" Value="0"/>
						<Setter Property="Template">
							<Setter.Value>
								<ControlTemplate TargetType="DataGridCell">
									<Border Background="{TemplateBinding Background}"
                                            Padding="{TemplateBinding Padding}">
										<ContentPresenter VerticalAlignment="Center"/>
									</Border>
								</ControlTemplate>
							</Setter.Value>
						</Setter>
						<Style.Triggers>
							<Trigger Property="IsSelected" Value="True">
								<Setter Property="Background" Value="#3B82F6"/>
							</Trigger>
						</Style.Triggers>
					</Style>
				</DataGrid.CellStyle>

				<!-- Estilo de las filas -->
				<DataGrid.RowStyle>
					<Style TargetType="DataGridRow">
						<Setter Property="Background" Value="Transparent"/>
						<Style.Triggers>
							<Trigger Property="IsSelected" Value="True">
								<Setter Property="Background" Value="#3B82F6"/>
							</Trigger>
							<Trigger Property="IsMouseOver" Value="True">
								<Setter Property="Background" Value="#334155"/>
							</Trigger>
						</Style.Triggers>
					</Style>
				</DataGrid.RowStyle>

				<DataGrid.Columns>
					<DataGridTextColumn Header="CODIGO"
                                        Binding="{Binding MemberCode}"
                                        Width="120"/>
					<DataGridTextColumn Header="NOMBRE"
                                        Binding="{Binding FirstName}"
                                        Width="*"/>
					<DataGridTextColumn Header="APELLIDO"
                                        Binding="{Binding LastName}"
                                        Width="*"/>
					<DataGridTextColumn Header="EMAIL"
                                        Binding="{Binding Email}"
                                        Width="*"/>
					<DataGridTextColumn Header="TELEFONO"
                                        Binding="{Binding Phone}"
                                        Width="120"/>
					<DataGridTextColumn Header="GENERO"
                                        Binding="{Binding Gender}"
                                        Width="80"/>
					<DataGridTextColumn Header="REGISTRO"
                                        Binding="{Binding CreatedAt, StringFormat='{}{0:dd/MM/yyyy}'}"
                                        Width="100"/>
				</DataGrid.Columns>
			</DataGrid>
		</Border>

		<!-- BARRA DE ESTADO -->
		<Border Grid.Row="3"
                Background="#1E293B"
                CornerRadius="6"
                Padding="16,10"
                Margin="0,16,0,0">
			<Grid>
				<Grid.ColumnDefinitions>
					<ColumnDefinition Width="*"/>
					<ColumnDefinition Width="Auto"/>
				</Grid.ColumnDefinitions>

				<TextBlock Grid.Column="0"
                           Text="{Binding StatusMessage}"
                           Foreground="#94A3B8"
                           FontSize="13"
                           VerticalAlignment="Center"/>

				<StackPanel Grid.Column="1" Orientation="Horizontal">
					<TextBlock Text="Total: "
                               Foreground="#64748B"
                               FontSize="13"
                               VerticalAlignment="Center"/>
					<TextBlock Text="{Binding TotalCount}"
                               Foreground="#10B981"
                               FontSize="13"
                               FontWeight="Bold"
                               VerticalAlignment="Center"/>
					<TextBlock Text=" miembros"
                               Foreground="#64748B"
                               FontSize="13"
                               VerticalAlignment="Center"/>
				</StackPanel>
			</Grid>
		</Border>

		<!-- Loading Overlay -->
		<Border Grid.Row="0" Grid.RowSpan="4"
                Background="#80000000"
                CornerRadius="8"
                Visibility="{Binding IsLoading, Converter={StaticResource BoolToVisibilityConverter}}">
			<StackPanel VerticalAlignment="Center" HorizontalAlignment="Center">
				<TextBlock Text="Cargando..."
                           Foreground="White"
                           FontSize="18"
                           HorizontalAlignment="Center"/>
			</StackPanel>
		</Border>
	</Grid>
</UserControl>
